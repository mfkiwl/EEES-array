int hist[256];
int input[512] = {
    0x09, 0x10, 0x0d, 0x48, 0x65, 0x83, 0x4c, 0xcb, 0x71, 0x6a, 0x09, 0x10, 0x0d, 0x48, 0x65, 0x83,
    0xcd, 0x41, 0x5a, 0x82, 0x48, 0x65, 0x63, 0xa4, 0x11, 0xd3, 0x48, 0x71, 0x32, 0x32, 0x33, 0xaf,
    0xde, 0x07, 0x66, 0x61, 0x24, 0x25, 0x83, 0xeb, 0x17, 0xe3, 0x38, 0x25, 0x89, 0x17, 0x78, 0x3b,
    0xff, 0x54, 0xac, 0x37, 0x38, 0x34, 0x83, 0xfc, 0x81, 0x4d, 0x44, 0x63, 0x21, 0x13, 0x23, 0xcb,
    0x19, 0x10, 0x0d, 0x48, 0x65, 0x83, 0x4c, 0xcb, 0x71, 0x6a, 0x09, 0x10, 0x0d, 0x48, 0x65, 0x83,
    0x0d, 0xf2, 0x13, 0x83, 0x48, 0x65, 0x83, 0x4c, 0x12, 0x2d, 0x43, 0x85, 0x01, 0x83, 0x05, 0xaf,
    0x0c, 0x32, 0x95, 0x43, 0x81, 0xa5, 0x9e, 0x1f, 0x10, 0x0e, 0x18, 0x64, 0x42, 0x51, 0x43, 0xeb,
    0x16, 0x4d, 0x60, 0x3f, 0x87, 0x65, 0x83, 0x4c, 0x13, 0x4d, 0x41, 0x15, 0x12, 0x21, 0x40, 0x92,
    0x09, 0x10, 0x0d, 0x48, 0x65, 0x83, 0x4c, 0xcb, 0x71, 0x6a, 0x09, 0x10, 0x0d, 0x48, 0x65, 0x83,
    0xcd, 0x41, 0x5a, 0x82, 0x48, 0x65, 0x63, 0xa4, 0x11, 0xd3, 0x48, 0x71, 0x32, 0x32, 0x33, 0xaf,
    0xde, 0x07, 0x66, 0x61, 0x24, 0x25, 0x83, 0xeb, 0x17, 0xe3, 0x38, 0x25, 0x89, 0x17, 0x78, 0x3b,
    0xff, 0x54, 0xac, 0x37, 0x38, 0x34, 0x83, 0xfc, 0x81, 0x4d, 0x44, 0x63, 0x21, 0x13, 0x23, 0xcb,
    0x19, 0x10, 0x0d, 0x48, 0x65, 0x83, 0x4c, 0xcb, 0x71, 0x6a, 0x09, 0x10, 0x0d, 0x48, 0x65, 0x83,
    0x0d, 0xf2, 0x13, 0x83, 0x48, 0x65, 0x83, 0x4c, 0x12, 0x2d, 0x43, 0x85, 0x01, 0x83, 0x05, 0xaf,
    0x0c, 0x32, 0x95, 0x43, 0x81, 0xa5, 0x9e, 0x1f, 0x10, 0x0e, 0x18, 0x64, 0x42, 0x51, 0x43, 0xeb,
    0x16, 0x4d, 0x60, 0x3f, 0x87, 0x65, 0x83, 0x4c, 0x13, 0x4d, 0x41, 0x15, 0x12, 0x21, 0x40, 0x92,
    0x09, 0x10, 0x0d, 0x48, 0x65, 0x83, 0x4c, 0xcb, 0x71, 0x6a, 0x09, 0x10, 0x0d, 0x48, 0x65, 0x83,
    0xcd, 0x41, 0x5a, 0x82, 0x48, 0x65, 0x63, 0xa4, 0x11, 0xd3, 0x48, 0x71, 0x32, 0x32, 0x33, 0xaf,
    0xde, 0x07, 0x66, 0x61, 0x24, 0x25, 0x83, 0xeb, 0x17, 0xe3, 0x38, 0x25, 0x89, 0x17, 0x78, 0x3b,
    0xff, 0x54, 0xac, 0x37, 0x38, 0x34, 0x83, 0xfc, 0x81, 0x4d, 0x44, 0x63, 0x21, 0x13, 0x23, 0xcb,
    0x19, 0x10, 0x0d, 0x48, 0x65, 0x83, 0x4c, 0xcb, 0x71, 0x6a, 0x09, 0x10, 0x0d, 0x48, 0x65, 0x83,
    0x0d, 0xf2, 0x13, 0x83, 0x48, 0x65, 0x83, 0x4c, 0x12, 0x2d, 0x43, 0x85, 0x01, 0x83, 0x05, 0xaf,
    0x0c, 0x32, 0x95, 0x43, 0x81, 0xa5, 0x9e, 0x1f, 0x10, 0x0e, 0x18, 0x64, 0x42, 0x51, 0x43, 0xeb,
    0x16, 0x4d, 0x60, 0x3f, 0x87, 0x65, 0x83, 0x4c, 0x13, 0x4d, 0x41, 0x15, 0x12, 0x21, 0x40, 0x92,
    0x09, 0x10, 0x0d, 0x48, 0x65, 0x83, 0x4c, 0xcb, 0x71, 0x6a, 0x09, 0x10, 0x0d, 0x48, 0x65, 0x83,
    0xcd, 0x41, 0x5a, 0x82, 0x48, 0x65, 0x63, 0xa4, 0x11, 0xd3, 0x48, 0x71, 0x32, 0x32, 0x33, 0xaf,
    0xde, 0x07, 0x66, 0x61, 0x24, 0x25, 0x83, 0xeb, 0x17, 0xe3, 0x38, 0x25, 0x89, 0x17, 0x78, 0x3b,
    0xff, 0x54, 0xac, 0x37, 0x38, 0x34, 0x83, 0xfc, 0x81, 0x4d, 0x44, 0x63, 0x21, 0x13, 0x23, 0xcb,
    0x19, 0x10, 0x0d, 0x48, 0x65, 0x83, 0x4c, 0xcb, 0x71, 0x6a, 0x09, 0x10, 0x0d, 0x48, 0x65, 0x83,
    0x0d, 0xf2, 0x13, 0x83, 0x48, 0x65, 0x83, 0x4c, 0x12, 0x2d, 0x43, 0x85, 0x01, 0x83, 0x05, 0xaf,
    0x0c, 0x32, 0x95, 0x43, 0x81, 0xa5, 0x9e, 0x1f, 0x10, 0x0e, 0x18, 0x64, 0x42, 0x51, 0x43, 0xeb,
    0x16, 0x4d, 0x60, 0x3f, 0x87, 0x65, 0x83, 0x4c, 0x13, 0x4d, 0x41, 0x15, 0x12, 0x21, 0x40, 0x92,

};

void histogram256(int* restrict hist_out,
        int* restrict img, int img_size) __attribute__((noinline));

int main() {
    histogram256(hist, input, 512);
}

void 
histogram256(int* restrict hist_out, int* restrict img, int img_size) {
    int i;
    for ( i = 0; i < 256; i +=16) {
        hist_out[i] = 0;
        hist_out[i+1] = 0;
        hist_out[i+2] = 0;
        hist_out[i+3] = 0;
        hist_out[i+4] = 0;
        hist_out[i+5] = 0;
        hist_out[i+6] = 0;
        hist_out[i+7] = 0;
        hist_out[i+8] = 0;
        hist_out[i+9] = 0;
        hist_out[i+10] = 0;
        hist_out[i+11] = 0;
        hist_out[i+12] = 0;
        hist_out[i+13] = 0;
        hist_out[i+14] = 0;
        hist_out[i+15] = 0;

    }

    for ( i = 0; i < img_size; i +=16) {
        hist_out[img[i]] ++;
        hist_out[img[i+1]]++;
        hist_out[img[i+2]]++;
        hist_out[img[i+3]]++;
        hist_out[img[i+4]]++;
        hist_out[img[i+5]]++;
        hist_out[img[i+6]]++;
        hist_out[img[i+7]]++;
        hist_out[img[i+8]] ++;
        hist_out[img[i+9]]++;
        hist_out[img[i+10]]++;
        hist_out[img[i+11]]++;
        hist_out[img[i+12]]++;
        hist_out[img[i+13]]++;
        hist_out[img[i+14]]++;
        hist_out[img[i+15]]++;
    }
}
